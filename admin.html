<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Admin Secure Login - Vinoteca Dobao</title>
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet" />
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />
    <!-- Reuse Stitch CSS for Consistency -->
    <link rel="stylesheet" href="style-stitch.css">
    <style>
        body {
            background: var(--background-light);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* Header specific for Login */
        .login-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .lock-icon {
            width: 3.5rem;
            height: 3.5rem;
            background: var(--primary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            box-shadow: var(--shadow-md);
            color: white;
        }

        /* PIN Display */
        .pin-display {
            display: flex;
            gap: 1rem;
            margin: 1rem 0 2rem;
        }

        .pin-dot {
            width: 0.8rem;
            height: 0.8rem;
            border-radius: 50%;
            border: 2px solid var(--text-muted);
            transition: all 0.2s ease;
        }

        .pin-dot.filled {
            background: var(--primary);
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(75, 1, 1, 0.2);
            transform: scale(1.1);
        }

        /* Keypad Styles */
        .keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            max-width: 260px;
            width: 85%;
        }

        .key-btn {
            aspect-ratio: 1/1;
            border-radius: 50%;
            border: none;
            background: white;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-sm);
            transition: all 0.1s ease;
            user-select: none;
        }

        .key-btn:active {
            background: var(--primary);
            color: white;
            transform: scale(0.9);
        }

        .key-btn.empty {
            background: transparent;
            box-shadow: none;
            cursor: default;
        }

        .key-btn.special {
            background: transparent;
            box-shadow: none;
            color: var(--text-primary);
        }

        .error-message {
            color: #d32f2f;
            font-size: 0.875rem;
            margin-top: 1rem;
            height: 1.5rem;
            font-weight: 500;
            opacity: 0;
            transition: opacity 0.3s;
        }
    </style>
</head>

<body>

    <div class="login-header slide-up">
        <div class="lock-icon">
            <span class="material-symbols-outlined" style="font-size: 2.5rem;">lock</span>
        </div>
        <h1 class="serif-title" style="font-size: 1.5rem; color: var(--text-primary);">Acceso de Administración</h1>
        <p style="color: var(--text-secondary); font-size: 0.85rem; margin-top: 0.5rem;">Vinoteca Dobao • Sommelier
            Digital</p>
    </div>

    <div class="pin-section slide-up">
        <p style="text-align: center; font-weight: 600; color: var(--primary); font-size: 0.9rem;">Introduzca su código
            de seguridad</p>

        <div class="pin-display" id="pinDisplay">
            <div class="pin-dot"></div>
            <div class="pin-dot"></div>
            <div class="pin-dot"></div>
            <div class="pin-dot"></div>
        </div>
    </div>

    <div class="keypad slide-up">
        <button class="key-btn" onclick="addNumber(1)">1</button>
        <button class="key-btn" onclick="addNumber(2)">2</button>
        <button class="key-btn" onclick="addNumber(3)">3</button>
        <button class="key-btn" onclick="addNumber(4)">4</button>
        <button class="key-btn" onclick="addNumber(5)">5</button>
        <button class="key-btn" onclick="addNumber(6)">6</button>
        <button class="key-btn" onclick="addNumber(7)">7</button>
        <button class="key-btn" onclick="addNumber(8)">8</button>
        <button class="key-btn" onclick="addNumber(9)">9</button>
        <div class="key-btn empty"></div>
        <button class="key-btn" onclick="addNumber(0)">0</button>
        <button class="key-btn special" onclick="deleteNumber()">
            <span class="material-symbols-outlined">backspace</span>
        </button>
    </div>

    <div class="error-message" id="errorMessage">Código de seguridad incorrecto</div>

    <footer style="margin-top: 2rem; text-align: center;">
        <p style="color: var(--primary); font-size: 0.8rem; font-weight: 600; cursor: pointer;">¿Olvidó su código?</p>
        <div
            style="display: flex; align-items: center; gap: 0.5rem; color: rgba(0,0,0,0.3); font-size: 0.75rem; margin-top: 1rem; justify-content: center;">
            <span class="material-symbols-outlined" style="font-size: 1rem;">verified_user</span>
            Sesión encriptada
        </div>
    </footer>

    <script>
        let currentPin = "";
        const CORRECT_PIN = "2026"; // Nueva Clave solicitada

        function addNumber(num) {
            if (currentPin.length < 4) {
                currentPin += num;
                updateDots();

                if (currentPin.length === 4) {
                    setTimeout(verifyPin, 150);
                }
            }
        }

        function deleteNumber() {
            if (currentPin.length > 0) {
                currentPin = currentPin.slice(0, -1);
                updateDots();
                document.getElementById('errorMessage').style.opacity = "0";
            }
        }

        function updateDots() {
            const dots = document.querySelectorAll('.pin-dot');
            dots.forEach((dot, i) => {
                if (i < currentPin.length) {
                    dot.classList.add('filled');
                } else {
                    dot.classList.remove('filled');
                }
            });
        }

        function verifyPin() {
            if (currentPin === CORRECT_PIN) {
                // Éxito: Guardar sesión y redirigir
                localStorage.setItem('admin_access', 'granted');
                window.location.href = 'admin-panel.html';
            } else {
                // Error: Animación de "shake"
                const pinDisplay = document.getElementById('pinDisplay');
                pinDisplay.style.animation = 'none';
                void pinDisplay.offsetWidth; // Trigger reflow
                pinDisplay.style.animation = 'shake 0.4s';

                document.getElementById('errorMessage').style.opacity = "1";

                // Limpiar después de un error
                setTimeout(() => {
                    currentPin = "";
                    updateDots();
                }, 500);
            }
        }

        // Estilos de animación extra
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                20%, 60% { transform: translateX(-10px); }
                40%, 80% { transform: translateX(10px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>

</html>